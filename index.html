<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Attendance Tracker</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f5f7fa; margin: 0; padding: 0; }
    .container { max-width: 750px; margin: 30px auto; background: #fff; box-shadow: 0 0 16px #d0d0de; border-radius: 10px; padding: 18px; }
    .grade-select { display: flex; gap: 9px; margin-bottom: 24px; }
    .grade-btn { padding: 10px 18px; font-size: 1.1em; background: #e6eefa; border-radius: 8px; cursor: pointer; border: 1px solid #aae; font-weight: bold; }
    .grade-btn.active { background: #64b6f7; color: #fff; border: 2px solid #2672c6; }
    .lists-wrap { display: flex; gap: 35px; margin-bottom: 28px; }
    .list { flex: 1; padding: 16px; border-radius: 8px; min-height: 200px; box-shadow: 0 2px 8px #ededed; }
    .list.present { background: #e1fbe8; }
    .list.absent { background: #ffeaea; }
    .list-title { font-weight: bold; margin-bottom: 14px; }
    .student-btn { display: block; background: #fff; border: 1px solid #aad; padding: 8px 12px; margin-bottom: 7px; border-radius: 5px; cursor: pointer; text-align: left; transition: background 0.2s; }
    .student-btn:hover { background: #f0fff0; }
    .abs-btn:hover { background: #ffd6d6; }
    .summary-area { background: #eef4ff; border-radius: 10px; padding: 12px 16px; margin-bottom: 28px; box-shadow: 0 2px 7px #dde; }
    .summary-title { font-weight: bold; margin-bottom: 10px; }
    .summary-item { margin-bottom: 12px; padding-bottom: 12px; border-bottom: 1px solid #cce; }
    .summary-item:last-child { border-bottom: none; }
    .summary-stats { font-size: 0.95em; color: #555; margin-bottom: 6px; }
    .summary-names { font-size: 0.9em; color: #333; }
    .send-block { display: flex; flex-direction: column; gap: 12px; margin-bottom: 10px; }
    .send-btn, .send-btn-given, .send-btn-choose { padding: 10px 18px; background: #54cb89; color: #fff; border: none; border-radius: 8px; font-size: 1em; cursor: pointer; font-weight: bold; }
    .send-btn:disabled, .send-btn-given:disabled, .send-btn-choose:disabled { background: #b1b1b1; cursor: not-allowed; }
    .input-row { display: flex; gap: 9px; align-items: center; margin-bottom: 6px; }
    .phone-input { font-size: 1em; padding: 8px; border: 1px solid #aaa; border-radius: 5px; width: 230px; }
    .action-btns { display: flex; gap: 9px; margin-top: 10px; }
    .add-summary-btn { padding: 8px 16px; background: #2672c6; color: #fff; border: none; border-radius: 6px; font-weight: bold; cursor: pointer; }
    .add-summary-btn:disabled { background: #b0b0b0; }
    .all-present-btn { padding: 8px 16px; background: #28a745; color: #fff; border: none; border-radius: 6px; font-weight: bold; cursor: pointer; }
    .all-present-btn:disabled { background: #b0b0b0; }
    .clear-summary-btn { padding: 7px 15px; background: #eee; color: #2672c6; border: 1px solid #ddd; border-radius: 5px; margin-left: 8px; font-weight: bold; cursor: pointer; }
  </style>
</head>
<body>
<div class="container">
  <h2>Attendance Tracker</h2>
  <div class="grade-select" id="gradeSelect"></div>
  <div class="lists-wrap">
    <div class="list present">
      <div class="list-title">Present Students <span id="presentCount"></span></div>
      <div id="presentList"></div>
    </div>
    <div class="list absent">
      <div class="list-title">Absentees List <span id="absentCount"></span></div>
      <div id="absentList"></div>
    </div>
  </div>
  <div class="action-btns">
    <button class="add-summary-btn" id="addToSummary">Add To Summary</button>
    <button class="all-present-btn" id="allPresentBtn">All Present</button>
  </div>
  <div class="summary-area" id="summaryArea" style="display:none;">
    <div class="summary-title">Summary for Sending</div>
    <div id="summaryContent"></div>
    <button class="clear-summary-btn" id="clearSummary">Clear Summary</button>
  </div>
  <div class="send-block">
    <button class="send-btn" id="sendBtn" disabled>Send to WhatsApp</button>
    <div class="input-row">
      <input class="phone-input" type="text" id="phoneInput" placeholder="Enter WhatsApp number (with country code)">
      <button class="send-btn-given" id="sendGivenBtn" disabled>Send Given Number</button>
    </div>
    <button class="send-btn-choose" id="sendChooseBtn" disabled>Choose to Send</button>
  </div>
</div>
<script>
// Editable student data
const studentData = {
 '9A': [
'Mst.A D Ajmal Thohith',
'Ms.Lakshana G',
'Ms.Anu Rakshitha',
'Ms.Dhivya Darshini',
'Ms.E Tejaswini',
'Ms.Muppiri Cheranvitha',
'Ms.Saie Jeevana J',
'Ms.Shamitha',
'Ms.Sri Vaishnavi',
'Ms.Tappita Vernica Reddy',
'Ms.Von Valentina M.V.',
'Ms.Yashika R',
'Mst Dhasvanth Kumar',
'Mst Krishna Nalagampalli Papudesi',
'Mst. E.Pawan',
'Mst.A.R.Parthiv',
'Mst.Boothala Darshan Reddy',
'Mst.Harindranath',
'Mst.Harshith R',
'Mst.Jeevith Josh Kr',
'Mst.Praneath',
'Mst.Prithvi',
'Mst.Roshan Praveen',
'Mst.Tarun Pranav S.B',
'Ms.R Irene Janita',
'Mst.Tamilvelan S',
'Mst.Thrilok R',
'Mst.Vaitheesh Sai',
'Mst.Venkatesan Sri Mallesh',
            ],
 '9B': [
'Mst.Buvanesh Y',
'Ms.Hemavathi S',
'Ms Tarika',
'Ms.Joshna',
'Ms.Niranjana Sai',
'Ms.Teja T',
'Mst.Krishna Karthik Buddi',
'Mst.Navyanth',
'Mst.Nivas P',
'Mst.Vishwaa Karthik',
'Mst.Sujan C',
'Ms.Eniya V',
            ],
'10A': [
'Mst.Abhiram Dasari ',
'Mst.Dhruv Charan',
'Ms.Eshita ',
'Mst.Hariharan V.A',
'Ms.Harshita V',
'Mst.Khethan Krishna K ',
'Ms.Lasya M ',
'Mst.Mohnish Reddy',
'Mst.Monish',
'Mst.Mounish S ',
'Mst.Muni Nihal B ',
'Mst.Reddy Anish Vegamoor ',
'Mst.Saiteja',
'Ms.Shanvi Reddy',
'Mst.Shrinik Varshan',
'Mst.Vikas V',
            ],
'10B': [
'Mst.Aadhvan',
'Mst.Arunnatesan Srinivasan',
'Mst.Fehmaan Sk',
'Mst.Giri Shankar',
'Ms.Gurram Varsha ',
'Ms.Harini V.A',
'Mst.Hemanth V',
'Mst.Keerthi Vasan J',
'Mst.Keerthi Vashan',
'Ms.Krishika',
'Mst.Nishanth C',
'Mst.Palasamudram Praneeth Sai ',
'Mst.Samuel Richards B',
'Mst.Saran',
'Mst.Sharad Bhushan S',
'Mst.Sunku Nagasai Nikiith',
'Mst.Sunku Nagasai Nishith',
'Ms.Thaania Bhagirathi',
'Mst.Rishik ',
            ],
'11': [
                'Mst.Abimanyu.B',
'Mst.Abinav.S',
'Ms.Aditi Prasad',
'Mst.Aditya Raj Singh',
'Mst.Ajay Krishna K P',
'Mst.Bachala Chetan Reddy',
'Mst.Berwin Reuben Varman',
'Mst.Darshan K',
'Mst.Dinesh Karthik J',
'Mst.Ganesh N',
'Ms.Geerthana G',
'Mst.Gowtham Vasudevan S',
'Mst. Haran Pranav E',
'Mst. Hrisheek Aryan Nunna',
'Mst. Jaghadheesh G',
'Ms.Jai Asmitha',
'Ms.Jayashree C J',
'Ms.Kanishka V',
'Mst.Krithik Sai Y',
'Mst.Nishanth T.S',
'Mst.Nithin B',
'Mst.Nitin Jose A',
'Mst.Pranav N R S',
'Ms.Prithikha S',
'Mst.Raajarajan P S',
'Mst.Ramprasaad R G',
'Mst.Renesh Jayaprapu',
'Mst.Sanjaiy Varman C M',
'Mst.Sanjeevee N',
'Mst.Sanjit Roshan',
'Mst.Santhosh Sagar S',
'Mst.Saswin M',
'Mst.Sathyanathavarman A',
'Mst.Shankaranarayanan M',
'Mst.Shanmugavarshini D M',
'Mst.Shylendar A K',
'Mst.Siddharth Dharshan D',
'Mst.Srihari V',
'Mst.Surya S',
'Ms.Thanishka Mohan S',
'Mst.Tharun Easwar S',
'Mst.Udhaya A',
'Mst.Vaishnav Chowdary',
'Mst.Varun S B',
'Mst.Vibhuraman ',
            ],

'12A': [
 'Mst.Adhitya Pranav',
'Ms.Bhavana',
'Mst.Bhuvan Harshaj',
'Mst.Chaitanya (Cbse)',
'Mst.Chukisivam V',
'Mst.Dharan S V',
'Mst.Duttala Likith Reddy',
'Mst.Geethesh',
'Mst.Guruthvik Reddy',
'Mst.Hanish',
'Mst.Harikaran',
'Ms.Harini (Cbse)',
'Mst.Harish Ragavndar',
'Mst.Harshit V',
'Mst.Jaswant S',
'Mst.Jaswanth V',
'Mst.Jeeva Surya',
'Mst.Kavensvar',
'Mst.Kavin  Haritharan',
'Ms.Keerthana',
'Ms.Kusuma Anjali',
'Ms.Lohitha T',
'Mst.Madavaneri Keshavardhan',
'Ms.Mahathi',
'Mst. Manipi Sahith',
'Mst. Nikhil Sujith Kumar',
'Mst. Sai Nihal',
'Mst. Sainath S',
'Mst.Sarvesh Raj',
'Mst.Sathyanarayana',
'Mst. Shiva Sri Raam',
'Mst. Shriram S',
'Mst.Shubhranshu Saha',
'Mst.Sree Saravana Raju',
'Mst.Sreejan',
'Mst. Subbareddy Gari John Abhinav',
'Mst.Sudharshan',
'Mst. Tarun Sai',
'Mst. Thanigaiselvan',
'Ms. Tharinishree',
'Mst.Tharun Kumar',
'Mst.Vayila Ramcharan',
            ],
'12B': [
'Mst.Abhilash Paul ',
'Ms.Kamalikaa',
'Mst.Kishore  (Cs)',
'Mst.Nithish Kumar ',
'Mst.Raghulnathan S ',
'Mst.Velsrinivas',
            ],
        };

const hardcodedNumber = '918870977156';

let currentGrade = null;
let presentStudents = [];
let absentStudents = [];
let summary = {};

const gradeSelect = document.getElementById('gradeSelect');
const presentList = document.getElementById('presentList');
const absentList = document.getElementById('absentList');
const presentCount = document.getElementById('presentCount');
const absentCount = document.getElementById('absentCount');
const addToSummaryBtn = document.getElementById('addToSummary');
const allPresentBtn = document.getElementById('allPresentBtn');
const summaryArea = document.getElementById('summaryArea');
const summaryContent = document.getElementById('summaryContent');
const clearSummaryBtn = document.getElementById('clearSummary');
const sendBtn = document.getElementById('sendBtn');
const phoneInput = document.getElementById('phoneInput');
const sendGivenBtn = document.getElementById('sendGivenBtn');
const sendChooseBtn = document.getElementById('sendChooseBtn');

function renderGrades() {
  gradeSelect.innerHTML = '';
  Object.keys(studentData).forEach(grade => {
    const btn = document.createElement('button');
    btn.textContent = grade;
    btn.className = 'grade-btn';
    if (grade === currentGrade) btn.classList.add('active');
    btn.onclick = () => selectGrade(grade);
    gradeSelect.appendChild(btn);
  });
}

function selectGrade(grade) {
  currentGrade = grade;
  presentStudents = [...studentData[grade]];
  absentStudents = [];
  renderLists();
  renderGrades();
}

function renderLists() {
  presentList.innerHTML = '';
  presentStudents.forEach(name => {
    const btn = document.createElement('button');
    btn.textContent = name;
    btn.className = 'student-btn';
    btn.onclick = () => {
      presentStudents = presentStudents.filter(n => n !== name);
      absentStudents.push(name);
      renderLists();
    };
    presentList.appendChild(btn);
  });
  absentList.innerHTML = '';
  absentStudents.forEach(name => {
    const btn = document.createElement('button');
    btn.textContent = name;
    btn.className = 'student-btn abs-btn';
    btn.onclick = () => {
      absentStudents = absentStudents.filter(n => n !== name);
      presentStudents.push(name);
      renderLists();
    };
    absentList.appendChild(btn);
  });
  presentCount.textContent = `(${presentStudents.length})`;
  absentCount.textContent = `(${absentStudents.length})`;
  addToSummaryBtn.disabled = (!currentGrade || absentStudents.length == 0);
  allPresentBtn.disabled = !currentGrade;
}

function buildSummaryMessage() {
  let today = new Date();
  const dstr = today.toLocaleDateString('en-IN');
  let msg = `${dstr}\nAbsentees list:`;
  Object.entries(summary).forEach(([grade, names]) => {
    const total = studentData[grade].length;
    const absent = names.length;
    const present = total - absent;
    msg += `\n\nGrade: ${grade}`;
    msg += `\nTotal: ${total}, Present: ${present}, Absent: ${absent}`;
    if (names.length === 0) {
      msg += `\nAll Present`;
    } else {
      names.forEach(nm => {
        msg += `\n${nm}`;
      });
    }
  });
  return msg.trim();
}

addToSummaryBtn.onclick = () => {
  if (currentGrade && absentStudents.length > 0) {
    summary[currentGrade] = [...absentStudents];
    renderSummary();
  }
};

allPresentBtn.onclick = () => {
  if (currentGrade) {
    summary[currentGrade] = [];
    renderSummary();
  }
};

function renderSummary() {
  if (Object.keys(summary).length === 0) {
    summaryArea.style.display = 'none';
    sendBtn.disabled = true;
    sendGivenBtn.disabled = true;
    sendChooseBtn.disabled = true;
    return;
  }
  summaryArea.style.display = 'block';
  let summaryText = '';
  Object.entries(summary).forEach(([grade, names]) => {
    const total = studentData[grade].length;
    const absent = names.length;
    const present = total - absent;
    summaryText += `<div class="summary-item">`;
    summaryText += `<div class="summary-stats"><b>${grade}</b> - Total: ${total}, Present: ${present}, Absent: ${absent}</div>`;
    if (names.length === 0) {
      summaryText += `<div class="summary-names" style="color: #28a745; font-weight: bold;">All Present</div>`;
    } else {
      summaryText += `<div class="summary-names">${names.join(', ')}</div>`;
    }
    summaryText += `</div>`;
  });
  summaryContent.innerHTML = summaryText;
  sendBtn.disabled = false;
  sendGivenBtn.disabled = !phoneInput.value.match(/^\d+$/);
  sendChooseBtn.disabled = false;
}

clearSummaryBtn.onclick = () => {
  summary = {};
  renderSummary();
};

sendBtn.onclick = () => {
  let msg = encodeURIComponent(buildSummaryMessage());
  window.open(`https://wa.me/${hardcodedNumber}?text=${msg}`, '_blank');
};

sendGivenBtn.onclick = () => {
  let phone = phoneInput.value.trim();
  if (!phone.match(/^\d+$/)) {
    alert('Enter valid WhatsApp number.');
    return;
  }
  let msg = encodeURIComponent(buildSummaryMessage());
  window.open(`https://wa.me/${phone}?text=${msg}`, '_blank');
};

sendChooseBtn.onclick = () => {
  let msg = encodeURIComponent(buildSummaryMessage());
  window.open(`https://wa.me/?text=${msg}`, '_blank');
};

phoneInput.oninput = () => {
  sendGivenBtn.disabled = !(phoneInput.value.match(/^\d+$/) && Object.keys(summary).length > 0);
};

renderGrades();
</script>
</body>
</html>
